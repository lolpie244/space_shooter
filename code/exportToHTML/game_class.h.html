<html>
<head>
<title>game_class.h</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6897bb;}
.s3 { color: #808080;}
.s4 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
game_class.h</font>
</center></td></tr></table>
<pre><span class="s0">using namespace </span><span class="s1">chrono</span><span class="s0">;</span>
<span class="s0">using namespace </span><span class="s1">std</span><span class="s0">;</span>
<span class="s0">using namespace </span><span class="s1">sf</span><span class="s0">;</span>
<span class="s0">namespace </span><span class="s1">game</span>
<span class="s1">{</span>
    <span class="s0">struct </span><span class="s1">game_info</span>
    <span class="s1">{</span>
        <span class="s0">int </span><span class="s1">fps_enemy</span><span class="s0">;</span>
        <span class="s1">game_info(): fps_enemy(</span><span class="s2">0</span><span class="s1">){}</span>
    <span class="s1">}</span><span class="s0">;</span>
    <span class="s0">class </span><span class="s1">game_object : </span><span class="s0">public </span><span class="s1">Object</span>
    <span class="s1">{</span>
    <span class="s0">protected</span><span class="s1">:</span>
        <span class="s0">bool </span><span class="s1">was_in_screen</span><span class="s0">;</span>
        <span class="s1">pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt; speed</span><span class="s0">;</span>
        <span class="s0">double </span><span class="s1">perspective_coef</span><span class="s0">;</span>
        <span class="s0">bool </span><span class="s1">is_rotate</span><span class="s0">;</span>
    <span class="s0">public</span><span class="s1">:</span>
        <span class="s1">game_object(){}</span>
        <span class="s1">game_object(Rect&lt;</span><span class="s0">double</span><span class="s1">&gt; new_rect</span><span class="s0">, </span><span class="s1">string new_texture</span><span class="s0">, </span><span class="s1">pair&lt;</span><span class="s0">int, int</span><span class="s1">&gt; new_speed = {</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">}):</span>
            <span class="s1">Object(new_rect</span><span class="s0">, </span><span class="s1">new_texture)</span><span class="s0">, </span><span class="s1">speed(new_speed)</span>
        <span class="s1">{</span>
            <span class="s1">was_in_screen = </span><span class="s0">false;</span>
            <span class="s1">is_rotate = </span><span class="s0">false;</span>
            <span class="s1">perspective_coef = </span><span class="s2">0</span><span class="s0">;</span>
            <span class="s1">speed.first *= constants::window_coef</span><span class="s0">;</span>
            <span class="s1">speed.second *= constants::window_coef</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">set_texture(string s)</span>
        <span class="s1">{</span>
            <span class="s1">texture_source = s</span><span class="s0">;</span>
            <span class="s1">sprite.setTexture(textures::get_texture(s))</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">bool </span><span class="s1">was_in_screen_check()</span>
        <span class="s1">{</span>
            <span class="s1">was_in_screen |= in_screen()</span><span class="s0">;</span>
            <span class="s0">return </span><span class="s1">was_in_screen</span><span class="s0">;</span>
        <span class="s1">}</span>

        <span class="s0">double</span><span class="s1">&amp; get_perspective_coef()</span>
        <span class="s1">{</span>
            <span class="s0">return </span><span class="s1">perspective_coef</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt;&amp; get_speed()</span>
        <span class="s1">{</span>
            <span class="s0">return </span><span class="s1">speed</span><span class="s0">;</span>
        <span class="s1">}</span><span class="s0">;</span>
        <span class="s0">void </span><span class="s1">draw(RenderTarget&amp; target</span><span class="s0">, </span><span class="s1">RenderStates states) </span><span class="s0">const</span>
        <span class="s1">{</span>
            <span class="s0">if</span><span class="s1">(!in_screen())</span>
                <span class="s0">return;</span>
            <span class="s0">double </span><span class="s1">x_k = sprite.getGlobalBounds().width * </span><span class="s2">0.03</span><span class="s0">;</span>
            <span class="s0">double </span><span class="s1">y_k = sprite.getGlobalBounds().height * </span><span class="s2">0.02</span><span class="s0">;</span>
            <span class="s0">double </span><span class="s1">x_1 = sprite.getGlobalBounds().left</span><span class="s0">;</span>
            <span class="s0">double </span><span class="s1">x_2 = sprite.getGlobalBounds().left + sprite.getGlobalBounds().width</span><span class="s0">;</span>
            <span class="s0">double </span><span class="s1">y_1 = sprite.getGlobalBounds().top</span><span class="s0">;</span>
            <span class="s0">double </span><span class="s1">y_2 = sprite.getGlobalBounds().top + sprite.getGlobalBounds().height</span><span class="s0">;</span>
            <span class="s1">sf::VertexArray quads(sf::Quads</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">;</span>

            <span class="s1">quads[</span><span class="s2">0</span><span class="s1">].texCoords = sf::Vector2f(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">quads[</span><span class="s2">1</span><span class="s1">].texCoords = sf::Vector2f(textures::textures[texture_source].getSize().x - </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">quads[</span><span class="s2">2</span><span class="s1">].texCoords = sf::Vector2f(textures::textures[texture_source].getSize().x - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">textures::textures[texture_source].getSize().y - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">quads[</span><span class="s2">3</span><span class="s1">].texCoords = sf::Vector2f(</span><span class="s2">0</span><span class="s0">, </span><span class="s1">textures::textures[texture_source].getSize().y - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">if</span><span class="s1">(is_rotate)</span>
            <span class="s1">{</span>
                <span class="s1">quads[</span><span class="s2">0</span><span class="s1">].texCoords = sf::Vector2f(</span><span class="s2">0</span><span class="s0">, </span><span class="s1">textures::textures[texture_source].getSize().y - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">quads[</span><span class="s2">1</span><span class="s1">].texCoords = sf::Vector2f(textures::textures[texture_source].getSize().x - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">textures::textures[texture_source].getSize().y - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">quads[</span><span class="s2">2</span><span class="s1">].texCoords = sf::Vector2f(textures::textures[texture_source].getSize().x - </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">quads[</span><span class="s2">3</span><span class="s1">].texCoords = sf::Vector2f(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s1">quads[</span><span class="s2">0</span><span class="s1">].color = sprite.getColor()</span><span class="s0">;</span>
            <span class="s1">quads[</span><span class="s2">1</span><span class="s1">].color = sprite.getColor()</span><span class="s0">;</span>
            <span class="s1">quads[</span><span class="s2">2</span><span class="s1">].color = sprite.getColor()</span><span class="s0">;</span>
            <span class="s1">quads[</span><span class="s2">3</span><span class="s1">].color = sprite.getColor()</span><span class="s0">;</span>

            <span class="s1">quads[</span><span class="s2">0</span><span class="s1">].position = sf::Vector2f(x_1 + x_k * abs(perspective_coef)</span><span class="s0">, </span><span class="s1">y_1 - y_k * perspective_coef)</span><span class="s0">;</span>
            <span class="s1">quads[</span><span class="s2">1</span><span class="s1">].position = sf::Vector2f(x_2 - x_k * abs(perspective_coef)</span><span class="s0">, </span><span class="s1">y_1 + y_k * perspective_coef)</span><span class="s0">;</span>
            <span class="s1">quads[</span><span class="s2">2</span><span class="s1">].position = sf::Vector2f(x_2 - x_k * abs(perspective_coef)</span><span class="s0">, </span><span class="s1">y_2 + y_k * perspective_coef)</span><span class="s0">;</span>
            <span class="s1">quads[</span><span class="s2">3</span><span class="s1">].position = sf::Vector2f(x_1 + x_k * abs(perspective_coef)</span><span class="s0">, </span><span class="s1">y_2 - y_k * perspective_coef)</span><span class="s0">;</span>
<span class="s3">//            if(texture_source == &quot;textures/game/enemy_ship/1.png&quot; ||</span>
<span class="s3">//                    texture_source == &quot;textures/game/enemy_ship/2.png&quot;)</span>
<span class="s3">//                            cout &lt;&lt; perspective_coef &lt;&lt; ' ' &lt;&lt; texture_source &lt;&lt; ' ' &lt;&lt; quads[0].position.x &lt;&lt; ' ' &lt;&lt; quads[0].position.y &lt;&lt; '\n';</span>
            <span class="s1">target.draw(quads</span><span class="s0">, </span><span class="s1">&amp;textures::textures[texture_source])</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">;</span>
    <span class="s0">class </span><span class="s1">engine : </span><span class="s0">public </span><span class="s1">game_object</span>
    <span class="s1">{</span>
        <span class="s1">pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt; cord</span><span class="s0">;</span>
        <span class="s1">game_object* obj</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">engine_fps</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">engine_type</span><span class="s0">;</span>
        <span class="s1">pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt; standart_scale</span><span class="s0">;</span>
    <span class="s0">public</span><span class="s1">:</span>
        <span class="s1">engine(pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt; new_cord</span><span class="s0">, </span><span class="s1">game_object* new_obj</span><span class="s0">, int </span><span class="s1">rot = </span><span class="s2">0</span><span class="s1">): cord(new_cord)</span><span class="s0">, </span><span class="s1">obj(new_obj)</span><span class="s0">,</span>
                <span class="s1">game_object(Rect&lt;</span><span class="s0">double</span><span class="s1">&gt;(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">60.0</span><span class="s0">, </span><span class="s2">61.0</span><span class="s1">)</span><span class="s0">, </span><span class="s4">&quot;textures/game/engine/1.png&quot;</span><span class="s1">)</span>
        <span class="s1">{</span>
            <span class="s1">perspective_coef = </span><span class="s2">0</span><span class="s0">;</span>
            <span class="s1">is_rotate = rot</span><span class="s0">;</span>
            <span class="s1">cord.first = cord.first * obj-&gt;get_sprite().getGlobalBounds().width</span><span class="s0">;</span>
            <span class="s1">cord.second = cord.second * obj-&gt;get_sprite().getGlobalBounds().height</span><span class="s0">;</span>
            <span class="s1">engine_fps = </span><span class="s2">0</span><span class="s0">;</span>
            <span class="s1">engine_type = </span><span class="s2">1</span><span class="s0">;</span>
            <span class="s1">standart_scale = {sprite.getScale().x</span><span class="s0">, </span><span class="s1">sprite.getScale().y}</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">change_texture(</span><span class="s0">int </span><span class="s1">fps)</span>
        <span class="s1">{</span>
            <span class="s1">sprite.setOrigin(sprite.getOrigin().x</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">sprite.setPosition(obj-&gt;get_sprite().getGlobalBounds().left + cord.first</span><span class="s0">, </span><span class="s1">obj-&gt;get_sprite().getGlobalBounds().top + cord.second)</span><span class="s0">;</span>
            <span class="s1">perspective_coef = obj-&gt;get_perspective_coef()</span><span class="s0">;</span>
            <span class="s0">if</span><span class="s1">(fps - engine_fps &gt; </span><span class="s2">15 </span><span class="s1">/ constants::delta_time)</span>
            <span class="s1">{</span>
                <span class="s1">engine_type = engine_type % </span><span class="s2">3 </span><span class="s1">+ </span><span class="s2">1</span><span class="s0">;</span>
                <span class="s1">engine_fps = fps</span><span class="s0">;</span>
                <span class="s1">texture_source = </span><span class="s4">&quot;textures/game/engine/&quot; </span><span class="s1">+ to_string(engine_type) + </span><span class="s4">&quot;.png&quot;</span><span class="s0">;</span>
                <span class="s1">sprite.setTexture(textures::get_texture(texture_source))</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">if</span><span class="s1">(is_rotate)</span>
                <span class="s1">sprite.setRotation(</span><span class="s2">180</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">change_scale(</span><span class="s0">double </span><span class="s1">scale)</span>
        <span class="s1">{</span>
            <span class="s1">sprite.setScale(scale * standart_scale.first</span><span class="s0">, </span><span class="s1">scale * standart_scale.second)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">;</span>
    <span class="s0">class </span><span class="s1">ship : </span><span class="s0">public </span><span class="s1">game_object</span>
    <span class="s1">{</span>
    <span class="s0">protected</span><span class="s1">:</span>
        <span class="s0">double </span><span class="s1">hp</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">type</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">points</span><span class="s0">;</span>
        <span class="s0">bool </span><span class="s1">had_damage</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">take_damage_fps</span><span class="s0">;</span>
    <span class="s0">public</span><span class="s1">:</span>
        <span class="s0">int </span><span class="s1">bullet_speed</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">bullet_fps</span><span class="s0">;</span>
        <span class="s1">vector&lt;pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt;&gt; bullet_cords</span><span class="s0">;</span>
        <span class="s1">vector&lt;engine&gt; engines</span><span class="s0">;</span>
        <span class="s1">ship(){</span>
            <span class="s1">rect = *(</span><span class="s0">new </span><span class="s1">Rect&lt;</span><span class="s0">double</span><span class="s1">&gt;(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span><span class="s0">;</span>
            <span class="s1">texture_source = </span><span class="s4">&quot;textures/empty.png&quot;</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">ship(Rect&lt;</span><span class="s0">double</span><span class="s1">&gt; new_rect</span><span class="s0">, </span><span class="s1">string new_texture</span><span class="s0">, </span><span class="s1">pair&lt;</span><span class="s0">int, int</span><span class="s1">&gt; new_speed ):</span>
                <span class="s1">game_object(new_rect</span><span class="s0">, </span><span class="s1">new_texture</span><span class="s0">, </span><span class="s1">new_speed){</span>
            <span class="s1">hp = </span><span class="s2">200</span><span class="s0">;</span>
            <span class="s1">take_damage_fps = -</span><span class="s2">100</span><span class="s0">;</span>
            <span class="s1">had_damage = </span><span class="s0">false;</span>
            <span class="s1">bullet_speed = </span><span class="s2">30</span><span class="s0">;</span>
            <span class="s1">points = </span><span class="s2">0</span><span class="s0">;</span>
            <span class="s1">bullet_fps = </span><span class="s2">0</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">int </span><span class="s1">get_points()</span>
        <span class="s1">{</span>
            <span class="s0">return </span><span class="s1">points</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">int </span><span class="s1">get_hp()</span>
        <span class="s1">{</span>
            <span class="s0">return </span><span class="s1">hp</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">virtual void </span><span class="s1">take_damage(</span><span class="s0">double </span><span class="s1">damage</span><span class="s0">, bool </span><span class="s1">f = </span><span class="s0">false</span><span class="s1">)</span>
        <span class="s1">{</span>
            <span class="s3">//cout &lt;&lt; &quot;HP &quot;&lt;&lt; hp &lt;&lt; '\n';</span>
            <span class="s1">hp -= damage</span><span class="s0">;</span>
            <span class="s0">if</span><span class="s1">(hp &lt; </span><span class="s2">0</span><span class="s1">)</span>
            <span class="s1">{</span>
                <span class="s3">//cout &lt;&lt; &quot;KILL\n&quot;;</span>
                <span class="s0">this</span><span class="s1">-&gt;sprite.setPosition(-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef</span><span class="s0">, </span><span class="s1">-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">-&gt;rect = Rect&lt;</span><span class="s0">double</span><span class="s1">&gt;(-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef</span><span class="s0">, </span><span class="s1">-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">-&gt;speed = {</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">}</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">-&gt;sprite.setScale(</span><span class="s2">0.000001</span><span class="s0">, </span><span class="s2">0.00001</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">if</span><span class="s1">(f)</span>
                <span class="s1">{</span>
                    <span class="s0">int </span><span class="s1">point</span><span class="s0">;</span>
                    <span class="s1">ifstream is(</span><span class="s4">&quot;score.txt&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">is &gt;&gt; point</span><span class="s0">;</span>
                    <span class="s1">point += </span><span class="s0">this</span><span class="s1">-&gt;points</span><span class="s0">;</span>
                    <span class="s1">is.close()</span><span class="s0">;</span>
                    <span class="s1">ofstream os(</span><span class="s4">&quot;score.txt&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">os &lt;&lt; point</span><span class="s0">;</span>
                    <span class="s1">os.close()</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s1">had_damage = </span><span class="s2">1</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">add_bullet_cords(pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt; cords)</span>
        <span class="s1">{</span>
            <span class="s1">bullet_cords.push_back({sprite.getGlobalBounds().width * cords.first</span><span class="s0">, </span><span class="s1">sprite.getGlobalBounds().height * cords.second})</span><span class="s0">;</span>
        <span class="s1">}</span><span class="s0">;</span>
        <span class="s0">void </span><span class="s1">add_engine_cords(pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt; cords</span><span class="s0">, bool </span><span class="s1">is_rotate = </span><span class="s0">false</span><span class="s1">)</span>
        <span class="s1">{</span>
            <span class="s1">engines.push_back(engine(cords</span><span class="s0">, this, </span><span class="s1">is_rotate))</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">engine_draw(main_gui_info* gui_info)</span>
        <span class="s1">{</span>
            <span class="s0">if</span><span class="s1">(had_damage)</span>
            <span class="s1">{</span>
                <span class="s1">had_damage = </span><span class="s0">false;</span>
                <span class="s1">take_damage_fps = gui_info-&gt;fps</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">if</span><span class="s1">(gui_info-&gt;fps - take_damage_fps &lt; </span><span class="s2">10 </span><span class="s1">/ constants::delta_time)</span>
            <span class="s1">{</span>
                <span class="s1">sprite.setColor(Color::Red)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">else</span>
                <span class="s1">sprite.setColor(Color::White)</span><span class="s0">;</span>
            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto</span><span class="s1">&amp; i : engines)</span>
            <span class="s1">{</span>
                <span class="s1">i.change_texture(gui_info-&gt;fps)</span><span class="s0">;</span>
                <span class="s1">gui_info-&gt;window-&gt;draw(i)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

    <span class="s1">}</span><span class="s0">;</span>
    <span class="s0">class </span><span class="s1">enemy_ship : </span><span class="s0">public </span><span class="s1">ship</span>
    <span class="s1">{</span>
        <span class="s0">int </span><span class="s1">type</span><span class="s0">;</span>
        <span class="s0">bool </span><span class="s1">direction</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">move_fps</span><span class="s0">;</span>
        <span class="s1">pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt; start</span><span class="s0">;</span>
        <span class="s1">game_elements* game_element</span><span class="s0">;</span>
    <span class="s0">public</span><span class="s1">:</span>
        <span class="s0">double</span><span class="s1">(*function)(</span><span class="s0">double </span><span class="s1">x)</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">function_type</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">bullets_count</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">max_bullets_count</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">bullets_cooldown</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">last_bullets</span><span class="s0">;</span>
        <span class="s1">enemy_ship(game_elements* new_game_elements</span><span class="s0">, </span><span class="s1">main_gui_info* gui_info) : ship()</span>
        <span class="s1">{</span>
            <span class="s1">take_damage_fps = -</span><span class="s2">100</span><span class="s0">;</span>
            <span class="s1">was_in_screen = </span><span class="s0">false;</span>
            <span class="s1">is_rotate = </span><span class="s0">false;</span>
            <span class="s1">perspective_coef = </span><span class="s2">0</span><span class="s0">;</span>
            <span class="s1">game_element = new_game_elements</span><span class="s0">;</span>
            <span class="s1">last_bullets = </span><span class="s2">0</span><span class="s0">;</span>
            <span class="s1">type = random_int(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">100</span><span class="s1">) % </span><span class="s2">2 </span><span class="s1">+ </span><span class="s2">1</span><span class="s0">;</span>
            <span class="s1">function_type = random_int(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">100</span><span class="s1">) % </span><span class="s2">2</span><span class="s0">;</span>
            <span class="s1">bullets_count = </span><span class="s2">0</span><span class="s0">;</span>
            <span class="s1">speed = {random_double(</span><span class="s2">0.5</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">random_double(</span><span class="s2">0.3</span><span class="s0">, </span><span class="s2">1.8</span><span class="s1">)}</span><span class="s0">;</span>
            <span class="s1">bullet_fps = gui_info-&gt;fps</span><span class="s0">;</span>
            <span class="s0">double </span><span class="s1">k = random_double(</span><span class="s2">0.5</span><span class="s0">, </span><span class="s2">1.5</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">if</span><span class="s1">(type == </span><span class="s2">1</span><span class="s1">)</span>
            <span class="s1">{</span>
                <span class="s1">max_bullets_count = </span><span class="s2">5</span><span class="s0">;</span>
                <span class="s1">bullets_cooldown = </span><span class="s2">600</span><span class="s0">;</span>
                <span class="s1">hp = random_int(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">100</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">points = hp * </span><span class="s2">3 </span><span class="s1">/ </span><span class="s2">10</span><span class="s0">;</span>
                <span class="s1">bullet_speed = </span><span class="s2">50</span><span class="s0">;</span>
                <span class="s1">texture_source = </span><span class="s4">&quot;textures/game/enemy_ship/1.png&quot;</span><span class="s0">;</span>
                <span class="s1">rect.width = </span><span class="s2">110 </span><span class="s1">* k</span><span class="s0">;</span>
                <span class="s1">rect.height = </span><span class="s2">87 </span><span class="s1">* k</span><span class="s0">;</span>
                <span class="s1">Object* obj = </span><span class="s0">new </span><span class="s1">Object(rect</span><span class="s0">, </span><span class="s1">texture_source)</span><span class="s0">;</span>
                <span class="s1">sprite = obj-&gt;get_sprite()</span><span class="s0">;</span>
                <span class="s0">delete </span><span class="s1">obj</span><span class="s0">;</span>
                <span class="s1">add_bullet_cords({</span><span class="s2">0.4</span><span class="s0">, </span><span class="s2">1</span><span class="s1">})</span><span class="s0">;</span>
                <span class="s1">add_bullet_cords({</span><span class="s2">0.6</span><span class="s0">, </span><span class="s2">1</span><span class="s1">})</span><span class="s0">;</span>
                <span class="s1">add_engine_cords({</span><span class="s2">0.3</span><span class="s0">, </span><span class="s2">0.35</span><span class="s1">}</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">add_engine_cords({</span><span class="s2">0.7</span><span class="s0">, </span><span class="s2">0.35</span><span class="s1">}</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">if</span><span class="s1">(type == </span><span class="s2">2</span><span class="s1">)</span>
            <span class="s1">{</span>
                <span class="s1">bullets_cooldown = </span><span class="s2">350</span><span class="s0">;</span>
                <span class="s1">max_bullets_count = </span><span class="s2">5</span><span class="s0">;</span>
                <span class="s1">hp = random_int(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">150</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">points = hp / </span><span class="s2">10</span><span class="s0">;</span>
                <span class="s1">texture_source = </span><span class="s4">&quot;textures/game/enemy_ship/2.png&quot;</span><span class="s0">;</span>
                <span class="s1">bullet_speed = </span><span class="s2">50</span><span class="s0">;</span>
                <span class="s1">rect.width = </span><span class="s2">110 </span><span class="s1">* k</span><span class="s0">;</span>
                <span class="s1">rect.height = </span><span class="s2">87 </span><span class="s1">* k</span><span class="s0">;</span>
                <span class="s1">Object* obj = </span><span class="s0">new </span><span class="s1">Object(rect</span><span class="s0">, </span><span class="s1">texture_source)</span><span class="s0">;</span>
                <span class="s1">sprite = obj-&gt;get_sprite()</span><span class="s0">;</span>
                <span class="s0">delete </span><span class="s1">obj</span><span class="s0">;</span>
                <span class="s1">reload_texture()</span><span class="s0">;</span>
                <span class="s1">add_bullet_cords({</span><span class="s2">0.5</span><span class="s0">, </span><span class="s2">1</span><span class="s1">})</span><span class="s0">;</span>
                <span class="s1">add_engine_cords({</span><span class="s2">0.5</span><span class="s0">, </span><span class="s2">0.2</span><span class="s1">}</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">if </span><span class="s1">(function_type == </span><span class="s2">1</span><span class="s1">)</span>
            <span class="s1">{</span>
                <span class="s1">rect.top = random_double(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1080 </span><span class="s1">* constants::window_coef)</span><span class="s0">;</span>
                <span class="s0">if </span><span class="s1">(random_int(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">100</span><span class="s1">) % </span><span class="s2">2 </span><span class="s1">+ </span><span class="s2">1 </span><span class="s1">== </span><span class="s2">1</span><span class="s1">)</span>
                <span class="s1">{</span>
                    <span class="s1">direction = </span><span class="s2">1</span><span class="s0">;</span>
                    <span class="s1">rect.left = -</span><span class="s2">15 </span><span class="s1">* constants::window_coef</span><span class="s0">;</span>

                <span class="s1">} </span><span class="s0">else</span>
                <span class="s1">{</span>
                    <span class="s1">direction = </span><span class="s2">0</span><span class="s0">;</span>
                    <span class="s1">rect.left = </span><span class="s2">1935 </span><span class="s1">* constants::window_coef</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">} </span><span class="s0">else</span>
            <span class="s1">{</span>
                <span class="s1">rect.left = random_double(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1920 </span><span class="s1">* constants::window_coef)</span><span class="s0">;</span>
                <span class="s0">if </span><span class="s1">(random_int(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">100</span><span class="s1">) % </span><span class="s2">2 </span><span class="s1">+ </span><span class="s2">1 </span><span class="s1">== </span><span class="s2">1</span><span class="s1">) {</span>
                    <span class="s1">direction = </span><span class="s2">1</span><span class="s0">;</span>
                    <span class="s1">rect.top = -</span><span class="s2">15 </span><span class="s1">* constants::window_coef</span><span class="s0">;</span>

                <span class="s1">} </span><span class="s0">else </span><span class="s1">{</span>
                    <span class="s1">direction = </span><span class="s2">0</span><span class="s0">;</span>
                    <span class="s1">rect.top = </span><span class="s2">1095 </span><span class="s1">* constants::window_coef</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s0">if</span><span class="s1">(direction == </span><span class="s2">0</span><span class="s1">)</span>
            <span class="s1">{</span>
                <span class="s1">speed.first *= -</span><span class="s2">1</span><span class="s0">;</span>
                <span class="s1">speed.second *= -</span><span class="s2">1</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s1">Object* obj = </span><span class="s0">new </span><span class="s1">Object(rect</span><span class="s0">, </span><span class="s1">texture_source)</span><span class="s0">;</span>
            <span class="s1">*</span><span class="s0">this </span><span class="s1">= obj</span><span class="s0">;</span>
            <span class="s0">delete </span><span class="s1">obj</span><span class="s0">;</span>
            <span class="s1">start.first = rect.left</span><span class="s0">;</span>
            <span class="s1">start.second = rect.top</span><span class="s0">;</span>
            <span class="s1">function = get_random_function({rect.left</span><span class="s0">, </span><span class="s1">rect.top}</span><span class="s0">, </span><span class="s1">function)</span><span class="s0">;</span>
            <span class="s3">//cout &lt;&lt; &quot;kekys &quot; &lt;&lt; texture_source &lt;&lt; ' ' &lt;&lt; rect.left &lt;&lt; ' ' &lt;&lt; rect.top &lt;&lt; '\n';</span>
            <span class="s3">//take_damage(10000);</span>
        <span class="s1">}</span>
        <span class="s1">pair&lt;</span><span class="s0">double, double</span><span class="s1">&gt; get_start()</span>
        <span class="s1">{</span>
            <span class="s0">return </span><span class="s1">start</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">check_to_kill()</span><span class="s0">;</span>
        <span class="s1">Object* </span><span class="s0">operator</span><span class="s1">=(Object* a)</span>
        <span class="s1">{</span>
            <span class="s1">sprite = a-&gt;get_sprite()</span><span class="s0">;</span>
            <span class="s1">rect = a-&gt;get_rect()</span><span class="s0">;</span>
            <span class="s0">return </span><span class="s1">a</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">take_damage(</span><span class="s0">double </span><span class="s1">damage</span><span class="s0">, bool </span><span class="s1">f = </span><span class="s0">false</span><span class="s1">)</span>
        <span class="s1">{</span>
            <span class="s1">hp -= damage</span><span class="s0">;</span>
            <span class="s3">//cout &lt;&lt; &quot;HP &quot;&lt;&lt; hp &lt;&lt; '\n';</span>
            <span class="s0">if</span><span class="s1">(hp &lt; </span><span class="s2">0</span><span class="s1">)</span>
            <span class="s1">{</span>
                <span class="s3">//cout &lt;&lt; &quot;KILLL\n&quot;;</span>
                <span class="s0">this</span><span class="s1">-&gt;sprite.setPosition(-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef</span><span class="s0">, </span><span class="s1">-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">-&gt;rect = Rect&lt;</span><span class="s0">double</span><span class="s1">&gt;(-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef</span><span class="s0">, </span><span class="s1">-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">-&gt;speed = {</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">}</span><span class="s0">;</span>
                <span class="s0">this</span><span class="s1">-&gt;function = [](</span><span class="s0">double </span><span class="s1">x){</span><span class="s0">return </span><span class="s1">-</span><span class="s2">10000.0</span><span class="s0">;</span><span class="s1">}</span><span class="s0">;</span>
                <span class="s0">if</span><span class="s1">(f)</span>
                <span class="s1">{</span>
                    <span class="s0">int </span><span class="s1">point</span><span class="s0">;</span>
                    <span class="s1">ifstream is(</span><span class="s4">&quot;score.txt&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">is &gt;&gt; point</span><span class="s0">;</span>
                    <span class="s1">point += </span><span class="s0">this</span><span class="s1">-&gt;points</span><span class="s0">;</span>
                    <span class="s1">is.close()</span><span class="s0">;</span>
                    <span class="s1">ofstream os(</span><span class="s4">&quot;score.txt&quot;</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s1">os &lt;&lt; point</span><span class="s0">;</span>
                    <span class="s1">os.close()</span><span class="s0">;</span>

                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s1">had_damage = </span><span class="s2">1</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">bool operator </span><span class="s1">!=(enemy_ship a)</span>
        <span class="s1">{</span>
            <span class="s0">return </span><span class="s1">a.speed != speed || a.direction != direction || a.rect != </span><span class="s0">this</span><span class="s1">-&gt;rect</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">;</span>

    <span class="s0">class </span><span class="s1">bullet : </span><span class="s0">public </span><span class="s1">game_object</span>
    <span class="s1">{</span>
        <span class="s1">set&lt;ship*&gt;* ship_to_destroy</span><span class="s0">;</span>
        <span class="s1">set&lt;bullet*&gt;* bullets</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">id</span><span class="s0">;</span>
        <span class="s0">double </span><span class="s1">damage</span><span class="s0">;</span>
    <span class="s0">public</span><span class="s1">:</span>
        <span class="s1">bullet(Rect&lt;</span><span class="s0">double</span><span class="s1">&gt; new_rect</span><span class="s0">, </span><span class="s1">string new_texture</span><span class="s0">, </span><span class="s1">pair&lt;</span><span class="s0">int, int</span><span class="s1">&gt; new_speed</span><span class="s0">, double </span><span class="s1">new_damage</span><span class="s0">, </span><span class="s1">set&lt;ship*&gt;* new_ship_to_destroy</span><span class="s0">, </span><span class="s1">set&lt;bullet*&gt;* new_bullets_to_destroy):</span>
                <span class="s1">game_object(new_rect</span><span class="s0">, </span><span class="s1">new_texture</span><span class="s0">, </span><span class="s1">new_speed)</span><span class="s0">, </span><span class="s1">damage(new_damage)</span><span class="s0">, </span><span class="s1">ship_to_destroy(new_ship_to_destroy)</span><span class="s0">, </span><span class="s1">bullets(new_bullets_to_destroy){</span>
            <span class="s1">was_in_screen = </span><span class="s0">true;</span>
            <span class="s1">id = random_int(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">100000</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">bullet(</span><span class="s0">const </span><span class="s1">bullet&amp; a)</span>
        <span class="s1">{</span>
            <span class="s1">*</span><span class="s0">this </span><span class="s1">= a</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">try_to_kill()</span>
        <span class="s1">{</span>
            <span class="s0">if</span><span class="s1">(!in_screen())</span>
                <span class="s0">return;</span>
            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">ships : *ship_to_destroy)</span>
                <span class="s0">if</span><span class="s1">(collision(ships-&gt;sprite_rect()) &amp;&amp; ships-&gt;in_screen())</span>
                <span class="s1">{</span>
                    <span class="s3">//cout &lt;&lt; &quot;HPPP &quot; &lt;&lt; ships-&gt;get_hp() &lt;&lt; '\n';</span>
                    <span class="s0">if</span><span class="s1">(</span><span class="s0">dynamic_cast</span><span class="s1">&lt;enemy_ship*&gt;(ships))</span>
                        <span class="s0">dynamic_cast</span><span class="s1">&lt;enemy_ship*&gt;(ships)-&gt;take_damage(damage</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">; else</span>
                    <span class="s1">ships-&gt;take_damage(damage</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">-&gt;sprite.setPosition(-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef</span><span class="s0">, </span><span class="s1">-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">-&gt;get_speed() = {</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">}</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>

            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">bullet : *bullets)</span>
                <span class="s0">if</span><span class="s1">(collision(bullet) &amp;&amp; bullet != </span><span class="s0">this</span><span class="s1">)</span>
                <span class="s1">{</span>
                    <span class="s1">bullet-&gt;sprite.setPosition(-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef</span><span class="s0">, </span><span class="s1">-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">-&gt;sprite.setPosition(-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef</span><span class="s0">, </span><span class="s1">-</span><span class="s2">10000 </span><span class="s1">* constants::window_coef)</span><span class="s0">;</span>
                    <span class="s0">this</span><span class="s1">-&gt;speed = {</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">}</span><span class="s0">;</span>
                    <span class="s1">bullet-&gt;speed = {</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">}</span><span class="s0">;</span>
                    <span class="s0">return;</span>
                <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">bool operator</span><span class="s1">!=(</span><span class="s0">const </span><span class="s1">bullet&amp; a)</span>
        <span class="s1">{</span>
            <span class="s0">return </span><span class="s1">id != a.id</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">bool operator</span><span class="s1">&lt;(bullet a) </span><span class="s0">const</span>
        <span class="s1">{</span>
            <span class="s0">return </span><span class="s1">id &lt; a.id</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">;</span>
    <span class="s0">class </span><span class="s1">game_elements</span>
    <span class="s1">{</span>
        <span class="s0">void </span><span class="s1">to_draw(RenderTarget* window</span><span class="s0">, </span><span class="s1">game_object* obj)</span>
        <span class="s1">{</span>
            <span class="s1">window-&gt;draw(*obj)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s0">public</span><span class="s1">:</span>
        <span class="s1">game_elements()</span>
        <span class="s1">{</span>
            <span class="s1">enemy_ships = </span><span class="s0">new </span><span class="s1">set&lt;enemy_ship*&gt;</span><span class="s0">;</span>
            <span class="s1">enemy_ships_to_destroy = </span><span class="s0">new </span><span class="s1">set&lt;ship*&gt;</span><span class="s0">;</span>
            <span class="s1">bullets = </span><span class="s0">new </span><span class="s1">set&lt;bullet*&gt;</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">ship* player_ship</span><span class="s0">;</span>
        <span class="s1">set&lt;enemy_ship*&gt;* enemy_ships</span><span class="s0">;</span>
        <span class="s1">set&lt;ship*&gt;* enemy_ships_to_destroy</span><span class="s0">;</span>
        <span class="s1">set&lt;bullet*&gt;* bullets</span><span class="s0">;</span>
        <span class="s0">void </span><span class="s1">set_ship(ship* new_ship)</span>
        <span class="s1">{</span>
            <span class="s1">player_ship = new_ship</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">add_enemy_ship(enemy_ship* new_ship)</span>
        <span class="s1">{</span>
            <span class="s1">enemy_ships-&gt;insert(new_ship)</span><span class="s0">;</span>
            <span class="s1">enemy_ships_to_destroy-&gt;insert(new_ship)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">add_bullet(bullet* new_bullet)</span>
        <span class="s1">{</span>
            <span class="s1">bullets-&gt;insert(new_bullet)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">draw(main_gui_info* gui_info)</span>
        <span class="s1">{</span>
            <span class="s1">player_ship-&gt;engine_draw(gui_info)</span><span class="s0">;</span>
            <span class="s1">to_draw(gui_info-&gt;window</span><span class="s0">, </span><span class="s1">player_ship)</span><span class="s0">;</span>
            <span class="s1">vector&lt;enemy_ship*&gt; ship_to_delete</span><span class="s0">;</span>
            <span class="s1">vector&lt;bullet*&gt; bullets_to_delete</span><span class="s0">;</span>

            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : *enemy_ships)</span>
                <span class="s0">if </span><span class="s1">(i-&gt;was_in_screen_check() &amp;&amp; !i-&gt;in_screen())</span>
                <span class="s1">{</span>
                    <span class="s1">cout &lt;&lt; </span><span class="s4">&quot;NO WAIT</span><span class="s0">\n</span><span class="s4">&quot;</span><span class="s0">;</span>
                    <span class="s1">ship_to_delete.push_back(i)</span><span class="s0">;</span>
                <span class="s1">}</span>
            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : *bullets)</span>
                <span class="s0">if </span><span class="s1">(i-&gt;was_in_screen_check() &amp;&amp; !i-&gt;in_screen())</span>
                    <span class="s1">bullets_to_delete.push_back(i)</span><span class="s0">;</span>

            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : bullets_to_delete)</span>
            <span class="s1">{</span>
                <span class="s1">bullets-&gt;erase(i)</span><span class="s0">;</span>
                <span class="s0">delete </span><span class="s1">i</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : ship_to_delete)</span>
            <span class="s1">{</span>
                <span class="s1">enemy_ships-&gt;erase(i)</span><span class="s0">;</span>
                <span class="s1">enemy_ships_to_destroy-&gt;erase(i)</span><span class="s0">;</span>
                <span class="s0">delete </span><span class="s1">i</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s3">//cout &lt;&lt; bullets-&gt;size() &lt;&lt; ' ' &lt;&lt; enemy_ships-&gt;size() &lt;&lt; '\n';</span>
            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : *enemy_ships)</span>
            <span class="s1">{</span>
                <span class="s1">i-&gt;engine_draw(gui_info)</span><span class="s0">;</span>
                <span class="s1">to_draw(gui_info-&gt;window</span><span class="s0">, </span><span class="s1">i)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : *bullets){</span>
                <span class="s3">//cout &lt;&lt; i-&gt;get_sprite().getGlobalBounds().left &lt;&lt; ' ' &lt;&lt; i-&gt;get_sprite().getGlobalBounds().top &lt;&lt; '\n';</span>
                <span class="s1">to_draw(gui_info-&gt;window</span><span class="s0">, </span><span class="s1">i)</span><span class="s0">;</span><span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s1">~game_elements()</span>
        <span class="s1">{</span>
            <span class="s1">cout &lt;&lt; </span><span class="s4">&quot;DELETE IT ALL</span><span class="s0">\n</span><span class="s4">&quot;</span><span class="s0">;</span>
            <span class="s0">delete </span><span class="s1">player_ship</span><span class="s0">;</span>
            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : *enemy_ships)</span>
                <span class="s0">delete </span><span class="s1">i</span><span class="s0">;</span>
            <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : *bullets)</span>
                <span class="s0">delete </span><span class="s1">i</span><span class="s0">;</span>
            <span class="s0">delete </span><span class="s1">enemy_ships</span><span class="s0">;</span>
            <span class="s0">delete </span><span class="s1">bullets</span><span class="s0">;</span>
            <span class="s0">delete </span><span class="s1">enemy_ships_to_destroy</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">;</span>
    <span class="s0">void </span><span class="s1">enemy_ship::check_to_kill()</span>
    <span class="s1">{</span>
        <span class="s0">if</span><span class="s1">(</span><span class="s0">this</span><span class="s1">-&gt;get_sprite().getGlobalBounds().left == -</span><span class="s2">10000</span><span class="s1">*constants::window_coef)</span>
        <span class="s1">{</span>
            <span class="s3">//cout &lt;&lt;&quot;kek\n&quot;;</span>
            <span class="s0">return;</span><span class="s1">}</span>
        <span class="s0">if</span><span class="s1">(</span><span class="s0">this</span><span class="s1">-&gt;collision(game_element-&gt;player_ship))</span>
        <span class="s1">{</span>
            <span class="s1">game_element-&gt;player_ship-&gt;take_damage(</span><span class="s2">20</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s0">this</span><span class="s1">-&gt;take_damage(</span><span class="s2">10000</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : *game_element-&gt;enemy_ships)</span>
            <span class="s0">if</span><span class="s1">(</span><span class="s0">this</span><span class="s1">-&gt;collision(i) &amp;&amp; i != </span><span class="s0">this</span><span class="s1">)</span>
            <span class="s1">{</span>
                <span class="s1">i-&gt;take_damage(</span><span class="s2">10000</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">take_damage(</span><span class="s2">10000</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">}</span>

    <span class="s1">}</span>
<span class="s1">}</span></pre>
</body>
</html>