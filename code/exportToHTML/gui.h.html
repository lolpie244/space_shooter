<html>
<head>
<title>gui.h</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6a8759;}
.s3 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
gui.h</font>
</center></td></tr></table>
<pre><span class="s0">using namespace </span><span class="s1">sf</span><span class="s0">;</span>
<span class="s0">using namespace </span><span class="s1">std</span><span class="s0">;</span>

<span class="s0">template</span><span class="s1">&lt;</span><span class="s0">typename </span><span class="s1">T = </span><span class="s0">int</span><span class="s1">&gt;</span>
<span class="s0">class </span><span class="s1">Button : </span><span class="s0">public </span><span class="s1">Object</span>
<span class="s1">{</span>
    <span class="s1">string id</span><span class="s0">;</span>
<span class="s0">public</span><span class="s1">:</span>
    <span class="s0">void </span><span class="s1">(*function)(T main_elements)</span><span class="s0">;</span>
    <span class="s1">Button(Rect&lt;</span><span class="s0">double</span><span class="s1">&gt; new_rects</span><span class="s0">, </span><span class="s1">string new_texture</span><span class="s0">, void</span><span class="s1">(*new_function)(T element) = empty_function&lt;T&gt;):</span>
        <span class="s1">Object(new_rects</span><span class="s0">, </span><span class="s1">new_texture)</span><span class="s0">, </span><span class="s1">function(new_function){}</span>
    <span class="s1">Button(</span><span class="s0">const </span><span class="s1">Button&amp; a): Object(Rect&lt;</span><span class="s0">double</span><span class="s1">&gt;(a.rect.left / constants::window_coef</span><span class="s0">, </span><span class="s1">a.rect.top / constants::window_coef</span><span class="s0">,</span>
                                                 <span class="s1">a.rect.width / constants::window_coef</span><span class="s0">, </span><span class="s1">a.rect.height / constants::window_coef)</span><span class="s0">,</span>
                                    <span class="s1">a.texture_source)</span><span class="s0">, </span><span class="s1">function(a.function){}</span>
    <span class="s1">string get_id()</span>
    <span class="s1">{</span>
        <span class="s0">return </span><span class="s1">id</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s1">Button </span><span class="s0">operator</span><span class="s1">=(Button a)</span>
    <span class="s1">{</span>
        <span class="s1">texture_source = a.texture_source</span><span class="s0">;</span>
        <span class="s1">sprite = a.sprite</span><span class="s0">;</span>
        <span class="s1">rect = a.rect</span><span class="s0">;</span>
        <span class="s1">function = a.function</span><span class="s0">;</span>
    <span class="s1">}</span>

<span class="s1">}</span><span class="s0">;</span>
<span class="s0">namespace </span><span class="s1">gui</span>
<span class="s1">{</span>
    <span class="s0">class </span><span class="s1">Text : </span><span class="s0">public </span><span class="s1">Object</span>
    <span class="s1">{</span>
        <span class="s1">sf::Text text</span><span class="s0">;</span>
        <span class="s1">sf::Font font</span><span class="s0">;</span>
    <span class="s0">public</span><span class="s1">:</span>
        <span class="s1">Text(string new_text</span><span class="s0">, </span><span class="s1">Rect&lt;</span><span class="s0">double</span><span class="s1">&gt; new_rect</span><span class="s0">, </span><span class="s1">sf::Color new_color = sf::Color::White)</span>
        <span class="s1">{</span>
            <span class="s1">font.loadFromFile(</span><span class="s2">&quot;textures/UI/font.TTF&quot;</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">text.setFont(font)</span><span class="s0">;</span>
            <span class="s1">new_rect.left *= constants::window_coef</span><span class="s0">;</span>
            <span class="s1">new_rect.top *= constants::window_coef</span><span class="s0">;</span>
            <span class="s1">new_rect.height *= constants::window_coef</span><span class="s0">;</span>
            <span class="s1">new_rect.width *= constants::window_coef</span><span class="s0">;</span>
            <span class="s0">double </span><span class="s1">size = </span><span class="s3">100 </span><span class="s1">* constants::window_coef</span><span class="s0">;</span>

            <span class="s1">text.setString(new_text)</span><span class="s0">;</span>
            <span class="s1">text.setCharacterSize(size)</span><span class="s0">;</span>
            <span class="s1">text.setFillColor(new_color)</span><span class="s0">;</span>
            <span class="s1">text.setOrigin(text.getGlobalBounds().width / </span><span class="s3">2.0</span><span class="s0">, </span><span class="s1">text.getGlobalBounds().height / </span><span class="s3">2.0</span><span class="s1">)</span><span class="s0">;</span>
            <span class="s1">text.setPosition(new_rect.left</span><span class="s0">, </span><span class="s1">new_rect.top)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">void </span><span class="s1">draw(RenderTarget&amp; target</span><span class="s0">, </span><span class="s1">RenderStates states) </span><span class="s0">const</span>
        <span class="s1">{</span>
            <span class="s1">string s = text.getString()</span><span class="s0">;</span>
            <span class="s1">cout &lt;&lt; </span><span class="s2">&quot;DRAW THIS &quot; </span><span class="s1">&lt;&lt; s &lt;&lt; </span><span class="s2">'</span><span class="s0">\n</span><span class="s2">'</span><span class="s0">;</span>
            <span class="s1">target.draw(text)</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s0">;</span>
    <span class="s1">string load_from_file(string name)</span>
    <span class="s1">{</span>
        <span class="s1">string s</span><span class="s0">;</span>
        <span class="s1">ifstream is(name)</span><span class="s0">;</span>
        <span class="s1">is &gt;&gt; s</span><span class="s0">;</span>
        <span class="s1">is.close()</span><span class="s0">;</span>
        <span class="s0">return </span><span class="s1">s</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s0">template</span><span class="s1">&lt;</span><span class="s0">typename </span><span class="s1">T&gt;</span>
<span class="s0">struct </span><span class="s1">UI_elements</span>
<span class="s1">{</span>
    <span class="s1">vector&lt;Button&lt;T&gt;&gt; button</span><span class="s0">;</span>
    <span class="s1">vector&lt;Object*&gt; object_1</span><span class="s0">;</span>
    <span class="s1">vector&lt;Object&gt; object_2</span><span class="s0">;</span>
    <span class="s1">UI_elements()</span>
    <span class="s1">{}</span>
    <span class="s0">void </span><span class="s1">add_button(Rect&lt;</span><span class="s0">double</span><span class="s1">&gt; new_rects</span><span class="s0">, </span><span class="s1">string new_texture</span><span class="s0">, void</span><span class="s1">(*new_function)(T element) = empty_function&lt;T&gt;)</span>
    <span class="s1">{</span>
        <span class="s1">button.push_back(Button&lt;T&gt;(new_rects</span><span class="s0">, </span><span class="s1">new_texture</span><span class="s0">, </span><span class="s1">new_function))</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">void </span><span class="s1">add_object(Object* a)</span>
    <span class="s1">{</span>
        <span class="s1">object_1.push_back(a)</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">void </span><span class="s1">add_object(Rect&lt;</span><span class="s0">double</span><span class="s1">&gt; new_rects</span><span class="s0">, </span><span class="s1">string new_texture)</span>
    <span class="s1">{</span>
        <span class="s1">object_2.push_back(Object(new_rects</span><span class="s0">, </span><span class="s1">new_texture))</span><span class="s0">;</span>
    <span class="s1">}</span>
    <span class="s0">void </span><span class="s1">draw(RenderTarget* window)</span>
    <span class="s1">{</span>
        <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : object_2)</span>
            <span class="s1">window-&gt;draw(i)</span><span class="s0">;</span>
        <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : object_1)</span>
            <span class="s0">if</span><span class="s1">(</span><span class="s0">dynamic_cast</span><span class="s1">&lt;gui::Text*&gt;(i) != </span><span class="s0">nullptr</span><span class="s1">)</span>
                <span class="s1">window-&gt;draw(*</span><span class="s0">dynamic_cast</span><span class="s1">&lt;gui::Text*&gt;(i))</span><span class="s0">;</span>
            <span class="s0">else</span>
                <span class="s1">window-&gt;draw(*i)</span><span class="s0">;</span>
        <span class="s0">for</span><span class="s1">(</span><span class="s0">auto </span><span class="s1">i : button)</span>
            <span class="s1">window-&gt;draw(i)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span><span class="s0">;</span>

<span class="s0">template</span><span class="s1">&lt;</span><span class="s0">typename </span><span class="s1">T&gt;</span>
<span class="s1">T* get_function(vector&lt;T&gt; button</span><span class="s0">, </span><span class="s1">Rect&lt;</span><span class="s0">double</span><span class="s1">&gt; cords)</span>
<span class="s1">{</span>
    <span class="s0">for</span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = button.size() - </span><span class="s3">1</span><span class="s0">; </span><span class="s1">i &gt;= </span><span class="s3">0</span><span class="s0">; </span><span class="s1">i--)</span>
        <span class="s0">if</span><span class="s1">(button[i].collision(cords))</span>
            <span class="s0">return </span><span class="s1">&amp;button[i]</span><span class="s0">;</span>
    <span class="s0">return nullptr;</span>
<span class="s1">}</span>
<span class="s0">template</span><span class="s1">&lt;</span><span class="s0">typename </span><span class="s1">T</span><span class="s0">, typename </span><span class="s1">P&gt;</span>
<span class="s0">void </span><span class="s1">click(vector&lt;T&gt; button</span><span class="s0">, </span><span class="s1">Rect&lt;</span><span class="s0">double</span><span class="s1">&gt; cords</span><span class="s0">, </span><span class="s1">P information)</span>
<span class="s1">{</span>
    <span class="s1">T* obj = get_function(button</span><span class="s0">, </span><span class="s1">cords)</span><span class="s0">;</span>
    <span class="s0">if</span><span class="s1">(obj == </span><span class="s0">nullptr</span><span class="s1">)</span>
        <span class="s0">return;</span>
    <span class="s1">obj-&gt;function(information)</span><span class="s0">;</span>
<span class="s1">}</span>
<span class="s0">template</span><span class="s1">&lt;</span><span class="s0">typename </span><span class="s1">T&gt;</span>
<span class="s0">void </span><span class="s1">empty_function(T k)</span>
<span class="s1">{}</span></pre>
</body>
</html>