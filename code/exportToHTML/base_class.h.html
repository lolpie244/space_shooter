<html>
<head>
<title>base_class.h</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #cc7832;}
.s2 { color: #6897bb;}
.s3 { color: #6a8759;}
.s4 { color: #808080;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
base_class.h</font>
</center></td></tr></table>
<pre>
<span class="s1">using namespace </span><span class="s0">sf</span><span class="s1">;</span>
<span class="s1">using namespace </span><span class="s0">std</span><span class="s1">;</span>

<span class="s1">namespace </span><span class="s0">textures</span>
<span class="s0">{</span>
    <span class="s0">map&lt;string</span><span class="s1">, </span><span class="s0">Texture&gt; textures</span><span class="s1">;</span>
    <span class="s0">Texture&amp; get_texture(string s)</span>
    <span class="s0">{</span>
        <span class="s1">if</span><span class="s0">(textures.count(s) == </span><span class="s2">0</span><span class="s0">)</span>
            <span class="s0">textures[s].loadFromFile(s)</span><span class="s1">;</span>
        <span class="s1">return </span><span class="s0">textures[s]</span><span class="s1">;</span>
    <span class="s0">}</span>
<span class="s0">}</span>


<span class="s1">class </span><span class="s0">Object : </span><span class="s1">public </span><span class="s0">Drawable</span>
<span class="s0">{</span>
<span class="s1">protected</span><span class="s0">:</span>
    <span class="s0">Sprite sprite</span><span class="s1">;</span>
    <span class="s0">string texture_source</span><span class="s1">;</span>
    <span class="s0">Rect&lt;</span><span class="s1">double</span><span class="s0">&gt; rect</span><span class="s1">;</span>

    <span class="s1">template</span><span class="s0">&lt;</span><span class="s1">typename </span><span class="s0">T = </span><span class="s1">float</span><span class="s0">&gt;</span>
    <span class="s1">bool </span><span class="s0">screen_check(pair&lt;T</span><span class="s1">, </span><span class="s0">T&gt; cords) </span><span class="s1">const</span>
    <span class="s0">{</span>
        <span class="s1">return </span><span class="s0">cords.first &gt;= </span><span class="s2">0 </span><span class="s0">&amp;&amp; cords.first &lt;= </span><span class="s2">1920 </span><span class="s0">* constants::window_coef &amp;&amp;</span>
                <span class="s0">cords.second &gt;= </span><span class="s2">0 </span><span class="s0">&amp;&amp; cords.second &lt;= </span><span class="s2">1080 </span><span class="s0">* constants::window_coef</span><span class="s1">;</span>
    <span class="s0">}</span>
<span class="s1">public</span><span class="s0">:</span>
    <span class="s0">Object(){</span>
        <span class="s0">texture_source = </span><span class="s3">&quot;&quot;</span><span class="s1">;</span>
    <span class="s0">}</span>
    <span class="s0">Object(Rect&lt;</span><span class="s1">double</span><span class="s0">&gt; new_rect</span><span class="s1">, </span><span class="s0">string new_texture)</span>
    <span class="s0">{</span>
        <span class="s0">texture_source = new_texture</span><span class="s1">;</span>
        <span class="s0">rect = new_rect</span><span class="s1">;</span>
        <span class="s0">sprite.setTexture(textures::get_texture(texture_source))</span><span class="s1">;</span>
        <span class="s0">sprite.setOrigin(sprite.getGlobalBounds().width / </span><span class="s2">2.0</span><span class="s1">, </span><span class="s0">sprite.getGlobalBounds().height / </span><span class="s2">2.0</span><span class="s0">)</span><span class="s1">;</span>
        <span class="s0">sprite.setScale(constants::window_coef * new_rect.width / sprite.getGlobalBounds().width</span><span class="s1">, </span><span class="s0">constants::window_coef * new_rect.height / sprite.getGlobalBounds().height)</span><span class="s1">;</span>
        <span class="s0">rect.top *= constants::window_coef</span><span class="s1">;</span>
        <span class="s0">rect.left *= constants::window_coef</span><span class="s1">;</span>
        <span class="s0">rect.width = sprite.getGlobalBounds().width</span><span class="s1">;</span>
        <span class="s0">rect.height = sprite.getGlobalBounds().height</span><span class="s1">;</span>
        <span class="s0">sprite.setPosition(rect.left</span><span class="s1">, </span><span class="s0">rect.top)</span><span class="s1">;</span>
    <span class="s0">}</span>
    <span class="s0">Object(</span><span class="s1">const </span><span class="s0">Object&amp; a): Object(Rect&lt;</span><span class="s1">double</span><span class="s0">&gt;(a.rect.left / constants::window_coef</span><span class="s1">, </span><span class="s0">a.rect.top / constants::window_coef</span><span class="s1">,</span>
                                                 <span class="s0">a.rect.width / constants::window_coef</span><span class="s1">, </span><span class="s0">a.rect.height / constants::window_coef)</span><span class="s1">,</span>
                                    <span class="s0">a.texture_source){}</span>
    <span class="s0">Sprite&amp; get_sprite()</span>
    <span class="s0">{</span>
        <span class="s1">return </span><span class="s0">sprite</span><span class="s1">;</span>
    <span class="s0">}</span>
    <span class="s0">Rect&lt;</span><span class="s1">double</span><span class="s0">&gt;&amp; get_rect()</span>
    <span class="s0">{</span>
        <span class="s1">return </span><span class="s0">rect</span><span class="s1">;</span>
    <span class="s0">}</span>
    <span class="s1">void </span><span class="s0">reload_texture()</span>
    <span class="s0">{</span>
        <span class="s0">sprite.setTexture(textures::get_texture(texture_source))</span><span class="s1">;</span>
        <span class="s4">//cout &lt;&lt; texture_source &lt;&lt; '\n';</span>
    <span class="s0">}</span>
    <span class="s0">Rect&lt;</span><span class="s1">float</span><span class="s0">&gt; sprite_rect()</span>
    <span class="s0">{</span>
        <span class="s1">return </span><span class="s0">sprite.getGlobalBounds()</span><span class="s1">;</span>
    <span class="s0">}</span>
    <span class="s1">virtual void </span><span class="s0">draw(RenderTarget&amp; target</span><span class="s1">, </span><span class="s0">RenderStates states) </span><span class="s1">const</span>
    <span class="s0">{</span>
        <span class="s0">target.draw(sprite</span><span class="s1">, </span><span class="s0">states)</span><span class="s1">;</span>
    <span class="s0">}</span>
    <span class="s1">bool </span><span class="s0">in_screen() </span><span class="s1">const</span>
    <span class="s0">{</span>
        <span class="s1">return </span><span class="s0">screen_check({sprite.getGlobalBounds().left</span><span class="s1">, </span><span class="s0">sprite.getGlobalBounds().top}) ||</span>
                <span class="s0">screen_check({sprite.getGlobalBounds().left + sprite.getGlobalBounds().width</span><span class="s1">, </span><span class="s0">sprite.getGlobalBounds().top + sprite.getGlobalBounds().height}) ||</span>
                <span class="s0">screen_check({sprite.getGlobalBounds().left + sprite.getGlobalBounds().width</span><span class="s1">, </span><span class="s0">sprite.getGlobalBounds().top}) ||</span>
                <span class="s0">screen_check({sprite.getGlobalBounds().left</span><span class="s1">, </span><span class="s0">sprite.getGlobalBounds().top + sprite.getGlobalBounds().height})</span><span class="s1">;</span>
    <span class="s0">}</span>
    <span class="s1">template</span><span class="s0">&lt;</span><span class="s1">typename </span><span class="s0">T&gt;</span>
    <span class="s1">bool </span><span class="s0">collision(</span><span class="s1">const </span><span class="s0">Rect&lt;T&gt; rect) </span><span class="s1">const</span>
    <span class="s0">{</span>
        <span class="s1">return static_cast</span><span class="s0">&lt;Rect&lt;T&gt;&gt;(</span><span class="s1">this</span><span class="s0">-&gt;sprite.getGlobalBounds()).intersects(rect)</span><span class="s1">;</span>
    <span class="s0">}</span>
    <span class="s1">bool </span><span class="s0">collision(</span><span class="s1">const </span><span class="s0">Object* obj) </span><span class="s1">const</span>
    <span class="s0">{</span>
        <span class="s4">//cout &lt;&lt; this-&gt;texture_source &lt;&lt; ' ' &lt;&lt; obj-&gt;texture_source &lt;&lt; '\n';</span>
        <span class="s1">return this</span><span class="s0">-&gt;sprite.getGlobalBounds().intersects(obj-&gt;sprite.getGlobalBounds()) ||</span>
                <span class="s0">obj-&gt;sprite.getGlobalBounds().intersects(</span><span class="s1">this</span><span class="s0">-&gt;sprite.getGlobalBounds())</span><span class="s1">;</span>
    <span class="s0">}</span>
    <span class="s0">Object </span><span class="s1">operator</span><span class="s0">=(Object a)</span>
    <span class="s0">{</span>
        <span class="s0">texture_source = a.texture_source</span><span class="s1">;</span>
        <span class="s0">sprite = a.sprite</span><span class="s1">;</span>
        <span class="s0">rect = a.rect</span><span class="s1">;</span>
    <span class="s0">}</span>

<span class="s0">}</span><span class="s1">;</span>

<span class="s1">struct </span><span class="s0">main_gui_info</span>
<span class="s0">{</span>
    <span class="s0">RenderWindow* window</span><span class="s1">;</span>
    <span class="s0">string* name</span><span class="s1">;</span>
    <span class="s1">int </span><span class="s0">fps</span><span class="s1">;</span>
    <span class="s0">std::chrono::system_clock::time_point time_point</span><span class="s1">;</span>
    <span class="s0">main_gui_info(RenderWindow* new_window = </span><span class="s1">nullptr</span><span class="s0">)</span>
    <span class="s0">{</span>
        <span class="s0">time_point = std::chrono::system_clock::now()</span><span class="s1">;</span>
        <span class="s0">fps = </span><span class="s2">0</span><span class="s1">;</span>
        <span class="s0">window = new_window</span><span class="s1">;</span>
        <span class="s0">name = </span><span class="s1">new </span><span class="s0">string(</span><span class="s3">&quot;main_menu&quot;</span><span class="s0">)</span><span class="s1">;</span>
    <span class="s0">}</span>
<span class="s0">}</span><span class="s1">;</span>
</pre>
</body>
</html>